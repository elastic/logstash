#!/bin/sh
# Usage:
#     bin/logstash [flags]
#
# See 'bin/logstash --help' for a list of flags
# See also 'bin/logstash-daemon' for running logstash
# in the background.

# Defaults you can override with environment variables
LS_HEAP_SIZE="${LS_HEAP_SIZE:=500m}"

basedir=$(cd `dirname $0`/..; pwd)
. ${basedir}/bin/logstash.lib.sh

setup

case $1 in
  deps) install_deps ;;
  -*) 
    # is the first argument a flag? If so, assume 'agent'
    program="$basedir/lib/logstash/runner.rb"
    exec $RUBYCMD "$program" agent "$@"
    ;;
  *)
    program="$basedir/lib/logstash/runner.rb"
    exec $RUBYCMD "$program" "$@"
    ;;
esac
