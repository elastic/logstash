This code is not beta, not alpha, but like something unnamed where
only three people in the world have gotten it to run. YMMV. Expect
much debuggery.

# Prereqs:
These instructions assume you are on a relatively recent
linux system, that you have a working (C) build environment,
that you have ruby and rubygems installed.


# Installation Instructions...
You should have ruby and rubygems installed.
After that install the following gems, via 'gem install gemname'

required gems:
- mkdtemp
- json
- ferret
- amqp
- eventmachine-tail
- uuid

The web app requires the following gems:
- merb-core
- merb-assets
- merb-helpers

You'll also need ruby-grok - see instructions below..

# INSTALLING GROK
Install grok ruby bindings
http://code.google.com/p/semicomplete/source/browse/grok/ruby/INSTALL

If you are on centos download and install a newer flex:
ftp://mirrors.kernel.org/fedora/releases/9/Fedora/source/SRPMS/flex-2.5.35-1.fc9.src.rpm

Install the following packages (centos: sudo yum install pkgname)
pcre-devel, libevent-devel, gperf
svn checkout http://semicomplete.googlecode.com/svn/grok
cd grok
make
sudo make install
cd ruby
ruby extconf.rb
make
sudo make install

Check your /etc/ld.so.conf, or /etc/ld.so.conf.d/* . 
If not already set add /usr/local/lib

# RUNNING PREREQUISITES
You must have a STOMP-capable message broker running. StompServer works fine if
you don't want to configure anything.

# RUNNING INSTRUCTIONS
cd into /opt/logstash
You'll need to start stompserver.. From the command line: 'stompserver'
Next start logstashd via 'ruby bin/logstashd.rb logstashd.yaml'
In another window start up the agent via 
'ruby bin/agent.redhat.rb localhost:61613'
This assumes your system is redhat derivative (fedora, centos, etc..)
You should see a bunch of traffic as 'agent' loads log data.

Now search via:
ruby bin/search.rb linux-syslog '*alsa*'
ruby bin/search.rb httpd-access '*favicon.ico*'

Note: All files will need access to /var/tmp/ruby-uuid so run all scripts
as the same user..

# RUNNING THE WEB INTERFACE
cd web
Then run 'merb'

This requires you have 'merb' installed.
