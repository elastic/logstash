[[dashboard-monitoring-with-elastic-agent]]
=== Collect {ls} monitoring data for dashboards
[subs="attributes"]
++++
<titleabbrev>Collect monitoring data for dashboards</titleabbrev>
++++

ToDo: Add brief intro describing the feature and value prop. 
So far, we haven't differentiated between the two. 
Add info to help them decide which one they want to use.  

When you have completed the <<monitoring-prereqs>>, install and configure {agent} to collect {ls} monitoring data for dashboards.
We'll walk you through the process in these steps:

* <<add-logstash-integration-ead>>
* <<add-agent-to-fleet-ead>>
* <<confirm-ead>>
* <<view-data-dashboard>>


[discrete]
[[add-logstash-integration-ead]]
==== Add the {agent} Logstash integration to monitor host logs and metrics

. Go to the {kib} home page, and click **Add integrations**.
+
--
[role="screenshot"]
image::images/kibana-home.png[{kib} home page]
--

. In the query bar, search for **Logstash** and select the integration to see more
details.

. Click **Add Logstash**.

. Configure the integration name and add a description (optional).

. Configure the integration to collect logs. 
* Make sure that **Logs** is turned on if you want to collect logs from your {ls} instance. Be sure that the required settings are correctly configured.
* Under **Logs**, modify the log paths to match your {ls} environment.

. Configure the integration to collect metrics.
* Make sure that **Metrics (Technical Preview)** is turned on, and **Metrics (Stack Monitoring)** is turned off.
* Under **Metrics (Technical Preview)**, make sure the Logstash URL setting
points to your {ls} instance URLs. +
By default, the integration collects {ls}
monitoring metrics from `https://localhost:9600`. If that host and port number are not
correct, update the `Logstash URL` setting. If you configured {ls} to use encrypted
communications and/or a username and password, you must access it via HTTPS, and expand the **Advanced Settings** options, and fill in with the appropriate values for your {ls} instance.

. Click **Save and continue**. +
This step takes a minute or two to complete. When
it's done, you'll have an agent policy that contains a system integration policy
for the configuration you just specified.
. In the popup, click **Add {agent} to your hosts** to open the **Add agent**
flyout.
+
TIP: If you accidentally close the popup, go to **{fleet} > Agents** and click
**Add agent**.


[discrete]
[[add-agent-to-fleet-ead]]

=== Install and run an {agent} on your machine
// Include section about installing agents
include::monitoring-install.asciidoc[tag=install-agent-widget]

[discrete]
[[confirm-ead]]
=== Confirm Enrollment
// Include section about confirming enrollment
include::monitoring-confirm.asciidoc[tag=confirm-enrollment-widget]

[discrete]
[[view-data-dashboard]]
=== Monitor Logstash logs and metrics

From the list of assets, open the **[Metrics Logstash] Logstash overview** dashboard to view overall performance. Then follow the navigation panel to further drill down into Logstash performance.
+
[role="screenshot"]
image::images/integration-dashboard-overview.png[The Logstash Overview dashboard in {kib} with various metrics from your monitored Logstash]

You can hover over any visualization to adjust its settings, or click the
**Edit** button to make changes to the dashboard. To learn more, refer to
{kibana-ref}/dashboard.html[Dashboard and visualizations].
