[[releasenotes]]
== Release Notes

This section summarizes the changes in the following releases:

* <<logstash-5-6-13,Logstash 5.6.13>>
* <<logstash-5-6-12,Logstash 5.6.12>>
* <<logstash-5-6-11,Logstash 5.6.11>>
* <<logstash-5-6-10,Logstash 5.6.10>>
* <<logstash-5-6-9,Logstash 5.6.9>>
* <<logstash-5-6-8,Logstash 5.6.8>>
* <<logstash-5-6-7,Logstash 5.6.7>>
* <<logstash-5-6-6,Logstash 5.6.6>>
* <<logstash-5-6-5,Logstash 5.6.5>>
* <<logstash-5-6-4,Logstash 5.6.4>>
* <<logstash-5-6-3,Logstash 5.6.3>>
* <<logstash-5-6-2,Logstash 5.6.2>>
* <<logstash-5-6-1,Logstash 5.6.1>>
* <<logstash-5-6-0,Logstash 5.6.0>>

[[logstash-5-6-13]]
=== Logstash 5.6.13 Release Notes

* Made cgroups support more robust and provide the override similar to ES ({lsissue}/10012[#10010]).

*Heartbeat Input*

* Fixed shutdown concurrency issues by simplifying shutdown signal handling https://github.com/logstash-plugins/logstash-input-heartbeat/pull/15[#15]

*S3 Output*

* Fixed leak of file handles that prevented temporary files from being cleaned up before pipeline restart https://github.com/logstash-plugins/logstash-output-s3/pull/193[#193]


[[logstash-5-6-12]]
=== Logstash 5.6.12 Release Notes

*Multiline Codec*

* Fixed `no method map_cleanup for nil class` error when shutting down.

*Rubydebug Codec*

* Fixed crash that could occur on startup if `$HOME` was unset or if `${HOME}/.aprc` was unreadable by pinning `awesome_print` dependency to a release before the bug was introduced.

*Clone Filter*

* Added a warning when 'clones' is empty since that results in a no-op.

*Dns Filter*

* Fixed JRuby resolver bug for versions prior to 9.1.16.0

*Mutate Filter*

* Changed documentation to clarify use of `replace` config option

*Ruby Filter*

* Fixed path based scripting not calling `filter_matched`

*Beats Input*

* Fixed handling of batches where the sequence numbers do not start with 1

*Exec Input*

* Fixed issue where certain log entries were incorrectly writing 'jdbc input' instead of 'exec input'

*Jdbc Input*

* Changed documentation to generalize the PATH location
* Added check to prevent count sql syntax errors when debug logging
* Fixed crash that occurs when receiving string input that cannot be coerced to UTF-8 (such as BLOB data)
* Swapped out mysql for postgresql for testing

*S3 Input*

* Added ability to optionally include S3 object properties inside @metadata
* Fixed error in documentation by removing illegal commas

*Udp Input*

* Fixed input workers exception handling and shutdown handling

*File Output*

* Fixed a bug introduced in v4.2.4 where events on low-volume pipelines could remain unflushed for long periods when `flush_interval` was non-zero
* Fixed a bug where flush interval was being called for each event when enabled

*Graphite Output*

* Fixed exception handling during socket writing to prevent logstash termination

*S3 Output*

* Fixed bucket validation failures when bucket policy requires encryption
* Internal: Revert rake pinning to fix upstream builds
* Docs: Fix incorrect characterization of parameters as `required` in example configuration.
* Internal: Pin rake version for jruby-1.7 compatibility

[[logstash-5-6-11]]
=== Logstash 5.6.11 Release Notes
* Fix ArrayIndexOutOfBoundsException from empty string field reference
* Check free space for PQ on specified path rather than root folder

[[logstash-5-6-10]]
=== Logstash 5.6.10 Release Notes
* Backport new PQ implementation
* Fix Cloner to properly clone ruby strings

*Netflow Codec*

* Fixes exception when receiving Netflow 9 from H3C devices
* Added support for Netflow 9 from H3C devices
* Fixes incorrect definitions of IE 231 and IE 232
* Fixes exceptions due to concurrent access of IPFIX templates, see issue #134
* Added support for Netflow 9 reduced-size encoding support
* Added support for Barracuda IPFIX Extended Uniflow
* Added support for IPFIX from Procera/NetIntact/Sandvine 15.1

*Dns Filter*

* Log timeouts as warn instead of error #43
* Allow concurrent queries when cache enabled #42

*Kv Filter*

* bugfix: improves trim_key and trim_value to trim any sequence of matching characters from the beginning and ends of the corresponding keys and values; a previous implementation limited trim to a single character from each end, which was surprising.
* bugfix: fixes issue where we can fail to correctly break up a sequence that includes a partially-quoted value followed by another fully-quoted value by slightly reducing greediness of quoted-value captures.

*Mutate Filter*

* Fix: when converting to float and float_eu, explicitly support same range of inputs as their integer counterparts; eliminates a regression introduced in 3.3.1 in which support for non-string inputs was inadvertently removed.

*S3 Input*

* #136 Avoid plugin crashes when encountering 'bad' files in S3 buckets
* Log entry when bucket is empty #150
* Symbolize hash keys for additional_settings hash #148

*UDP Input*

* Work around jruby/jruby#5148 by cloning messages on jruby 9k, therefore resizing the underlying byte buffer
* Fix missing require for the ipaddr library.

*S3 Output*

* Symbolize hash keys for additional_settings hash #179
* Docs: Set the default_codec doc attribute.

*Elasticsearch Output*

* Avoid infinite loop by checking for zero body size #737
* Add support for join based parent indexing (backport of #632) #686


[[logstash-5-6-9]]
=== Logstash 5.6.9 Release Notes

*Fluent Codec*

* Encode tags as fluent forward protocol tags. Ref: https://github.com/logstash-plugins/logstash-codec-fluent/pull/21[#21]

*Json_lines Codec*

* Support flush method https://github.com/logstash-plugins/logstash-codec-json_lines/pull/35[#35]

*Netflow Codec*

* Workaround for breaking change in Netflow-Input-UDP > 3.2.0 https://github.com/logstash-plugins/logstash-codec-netflow/issues/122[#122]
* Renamed some unknown VMware VDS fields
* Further improved decoding performance of ASA ACL ids
* Further improved decoding performance of MAC addresses
* Improved decoding performance of IPv4 addresses
* Improved decoding performance of ASA ACL ids
* Improved decoding performance of mac addresses

*Dns Filter*

* Logging improvement to include DNS resolution failure reason https://github.com/logstash-plugins/logstash-filter-dns/issues/36[#36]
* Fix bug where forward lookups would not cache timeout errors

*Grok Filter*

* Fixed memory leak when run on JRuby 1.x (Logstash 5.x) [#135](https://github.com/logstash-plugins/logstash-filter-grok/issues/135)

*Kv Filter*

* bugfix: correctly handle empty values between value separator and field separator (#58)
* feature: add option to split fields and values using a regex pattern (#55)

*Mutate Filter*

* Fix: Number strings using a **decimal comma** (e.g. 1,23), added convert support to specify integer_eu and float_eu.
* feature: Added capitalize feature.

*Ruby Filter*

* fix return of multiple events when using file based scripts https://github.com/logstash-plugins/logstash-filter-ruby/issues/41[#41]

*Translate Filter*

* Add 'refresh_behaviour' to either 'merge' or 'replace' during a refresh https://github.com/logstash-plugins/logstash-filter-translate/issues/57[#57]

*Beats Input*

* Ensure that the keep-alive is sent for ALL pending batches when the pipeline is blocked, not only the batches attempting to write to the queue. https://github.com/logstash-plugins/logstash-input-beats/issues/310[#310]
* Update jackson deps to 2.9.4
* Improvements to back pressure handling and memory management https://github.com/logstash-plugins/logstash-input-beats/issues/301[#301]

*Exec Input*

* Add metadata data to the event wrt execution duration and exit status
* Add 'schedule' option to schedule the command to run, using a cron expression

*Http Input*

* Make sure default codec is also cloned for thread safety. https://github.com/logstash-plugins/logstash-input-http/pull/80[#80]
* Always flush codec after each request and codec decoding. https://github.com/logstash-plugins/logstash-input-http/pull/81[#81]

*Jdbc Input*

* Clarify use of use_column_value. Make last_run_metadata_path reference in record_last_run entry clickable. https://github.com/logstash-plugins/logstash-input-jdbc/issues/273[#273]
* Load the driver with the system class loader. Fixes issue loading some JDBC drivers in Logstash 6.2+ https://github.com/logstash-plugins/logstash-input-jdbc/issues/263[#263]
* Fix regression with 4.3.5 that can result in NULL :sql_last_value depending on timestamp format https://github.com/logstash-plugins/logstash-input-jdbc/issues/274[#274]
* Fix long standing bug where setting jdbc_default_timezone loses milliseconds. Force all usage of sql_last_value to be typed according to the settings. https://github.com/logstash-plugins/logstash-input-jdbc/issues/140[#140]
* Fix memory leak https://github.com/logstash-plugins/logstash-input-jdbc/issues/261[#261]
* Open and close connection for each query https://github.com/logstash-plugins/logstash-input-jdbc/issues/147[#147]

*Redis Input*

* Add support for SSL https://github.com/logstash-plugins/logstash-input-redis/issues/61[#61]
* Add support for Redis unix sockets https://github.com/logstash-plugins/logstash-input-redis/issues/64[#64]

*S3 Input*

* Improve error handling when listing/downloading from S3 https://github.com/logstash-plugins/logstash-input-s3/issues/144[#144]
* Add documentation for endpoint, role_arn and role_session_name https://github.com/logstash-plugins/logstash-input-s3/issues/142[#142]
* Add support for additional_settings option https://github.com/logstash-plugins/logstash-input-s3/issues/141[#141]

*Sqs Input*

* Add documentation for endpoint, role_arn and role_session_name https://github.com/logstash-plugins/logstash-input-sqs/issues/46[#46]
* Fix sample IAM policy to match to match the documentation https://github.com/logstash-plugins/logstash-input-sqs/issues/32[#32]

*Syslog Input*

* Allow the syslog field to be a configurable option.  This is useful for when codecs change the field containing the syslog data (e.g. the CEF codec).

*Syslog Input*

* Make the grok pattern a configurable option

*Udp Input*

* Add metrics support for events, operations, connections and errors produced during execution. https://github.com/logstash-plugins/logstash-input-udp/issues/34[#34]
* Fix support for IPv6 https://github.com/logstash-plugins/logstash-input-udp/issues/31[#31]

*Aws Mixin*

* Drop strict value validation for region option https://github.com/logstash-plugins/logstash-mixin-aws/issues/36[#36]
* Add endpoint option to customize the endpoint uri https://github.com/logstash-plugins/logstash-mixin-aws/issues/32[#32]
* Allow user to provide a role to assume https://github.com/logstash-plugins/logstash-mixin-aws/issues/27[#27]
* Update aws-sdk dependency to '~> 2'
* Minor config validation fixes

*File Output*

* Add feature `write_behavior` to the documentation https://github.com/logstash-plugins/logstash-output-file/issues/58[#58]

*S3 Output*

* Add documentation for endpoint, role_arn and role_session_name https://github.com/logstash-plugins/logstash-output-s3/issues/174[#174]
* Add option for additional settings https://github.com/logstash-plugins/logstash-output-s3/issues/173[#173]
* Add more S3 bucket ACLs https://github.com/logstash-plugins/logstash-output-s3/issues/158[#158]
* Handle file not found exception on S3 upload https://github.com/logstash-plugins/logstash-output-s3/issues/144[#144]
* Document prefix interpolation https://github.com/logstash-plugins/logstash-output-s3/issues/154[#154]

[[logstash-5-6-8]]
=== Logstash 5.6.8 Release Notes

There are no user-facing changes in this release.

[[logstash-5-6-7]]
=== Logstash 5.6.7 Release Notes

*Gelf Input*

* Add support for listening on a raw TCP socket

*Multiline Codec*

* Fixed concurrency issue causing random failures when multiline codec was used together with a multi-threaded input plugin

*CSV Filter*

* Added support for tagging empty rows which users can reference to conditionally drop events

*Elasticsearch Input*

* Add support for scheduling periodic execution of the query

[[logstash-5-6-6]]
=== Logstash 5.6.6 Release Notes
* Fixed a bug where cloning a LogStash Timestamp object would result in an empty object
* Changed option validation to occur before checking for deprecation/obsoletion

[[logstash-5-6-5]]
=== Logstash 5.6.5 Release Notes
* Fixed a bug where persistent queue could not be opened when in some states
* Improved shutdown process by ensuring that Logstash terminates on second SIGINT. Prior to this release, there were some situations where executing two SIGNINTs would not kill Logstash.

[[logstash-5-6-4]]
=== Logstash 5.6.4 Release Notes
* Fix bug where setting `log.level=debug` would cause Logstash to crash
* Fix bug where queues configured to use a single page would not be able to process events. This also wound up being a small perf boost. https://github.com/elastic/logstash/pull/8275[#8275]
* Fix bug where a `0` exit status could be emitted when exiting due to an error by the `logstash-plugin.bat` command on windows.

[[logstash-5-6-3]]
=== Logstash 5.6.3 Release Notes

* Known Issue: Running Logstash with log level set to debug will cause the pipeline to crash
* Improved pipeline performance
* Fixed issue where DLQ would crash at startup when a segment file was missing
* Fixed issues with proxy handling when installing plugins

[[logstash-5-6-2]]
=== Logstash 5.6.2 Release Notes

* Fix a regression where `Event.clone` would not clone event metadata
* https://github.com/elastic/logstash/pulls?utf8=%E2%9C%93&q=is%3Apr%20label%3Av5.6.2%20is%3Aclosed%20label%3Abug%20[Various minor bug fixes]

[[logstash-5-6-1]]
=== Logstash 5.6.1 Release Notes

* There are no user-facing changes in this release

[[logstash-5-6-0]]
=== Logstash 5.6.0 Release Notes

* Introduced modules for Netflow and ArcSight data. Modules contain pre-packaged Logstash configuration, Kibana dashboards
  and other metadata files to ease the set up of the Elastic stack for certain data sources. The goal of these modules are
  to provide an end-to-end, 5-min getting started experience for a user exploring a data source.
* Added a new setting called `config.support_escapes`. This setting enables the use of escape characters such as `\n` in
  the Logstash configuration.
* Improved the performance of metrics collection and reporting infrastructure. Overall, in this release, there is lower load
  average, less GC and higher throughput when running Logstash.
* When processing events from the DLQ, there are added checks now to stop them from being written to the DLQ again.
* Fixed an issue which would crash Logstash when accessing DLQ events using a timestamp range.

[float]
==== Filter Plugins

*`GeoIP`*: The free GeoIPLite2-ASN database from MaxMind is now bundled in Logstash to be able to look up ASN data out
  of the box.


